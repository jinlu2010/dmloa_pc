{"remainingRequest":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\addStaff.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\addStaff.vue","mtime":1625243399810},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1615258097485},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1615258095774}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\treportlist: [],\n\t\t\tpostlist: [],\n\t\t\talldeptlist: [],\n\t\t\tstaff: {\n\t\t\t\tidentity: '普通员工',\n\t\t\t\tname:'',\n\t\t\t\tgender:'男',\n\t\t\t\tbirthday:'',\n\t\t\t\tphone:'',\n\t\t\t\temail:'',\n\t\t\t\taccount:'',\n\t\t\t\tpassword:'',\n\t\t\t\tdept:'',\n\t\t\t\tpost:'',\n\t\t\t\treport:'',\n\t\t\t\tstate:'',\n\t\t\t\tskill:'',\n\t\t\t\toutskill:''\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t    let that = this;\n\t    that.axios.post(\"api/alldeptlist/\")\n\t      .then(function (resp) {\n\t        console.log(resp.data);\n\t        that.alldeptlist = resp.data;\n\t      })\n\t      .catch(function (error) {\n\t        console.log(error);\n\t      });\n\t\t  \n\t\tthat.axios.post(\"api/reportlist/\")\n\t\t  .then(function (resp) {\n\t\t    console.log(resp.data);\n\t\t    that.reportlist = resp.data;\n\t\t\tconsole.log(\"汇报对象\"+that.reportlist)\n\t\t  })\n\t\t  .catch(function (error) {\n\t\t    console.log(error);\n\t\t  });\n\t},\n\tmethods: {\n\t\tselectChanged(e) {\n\t\t\tlet that = this\n\t\t\tlet deptid= e\n\t\t\tconsole.log(deptid);\n\t\t\tlet params = new URLSearchParams();\n\t\t\tparams.append(\"deptid\", deptid);\n\t\t\tthis.axios.post('api/postlist/', params)\n\t\t\t.then(function (resp) {\n\t\t\t  console.log(resp.data);\n\t\t\t  that.postlist = resp.data;\n\t\t\t  if(that.postlist.length == 0){\n\t\t\t\t  alert('该部门无任何岗位，请先去创建！')\n\t\t\t  }\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t  console.log(error);\n\t\t\t});\n\t\t},\n\t\t\n\t\taddStaff: function() {\n\t\t\tlet data={\n\t\t\t\tidentity:this.staff.identity,\n\t\t\t\tname:this.staff.name,\n\t\t\t\tgender:this.staff.gender,\n\t\t\t\tbirthday:this.staff.birthday,\n\t\t\t\tphone:this.staff.phone,\n\t\t\t\temail:this.staff.email,\n\t\t\t\taccount:this.staff.account,\n\t\t\t\tpassword:this.staff.password,\n\t\t\t\tdept:this.staff.dept,\n\t\t\t\tpost:this.staff.post,\n\t\t\t\treport:this.staff.report,\n\t\t\t\tstate:this.staff.state,\n\t\t\t\tskill:this.staff.skill,\n\t\t\t\toutskill:this.staff.outskill\n\t\t\t}\n\t\t\tlet staff = JSON.stringify(data);\n\t\t\tconsole.log(staff);\n\t\t\tlet params = new URLSearchParams();\n\t\t\tparams.append(\"staff\", staff);\n\t\t\tthis.axios.post('api/addStaff/', params)\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (res.data.code == 0) {\n\t\t\t\t\talert('恭喜您，新建员工成功！');\n\t\t\t\t\tlet token = res.data.deptid\n\t\t\t\t\tlocalStorage.setItem('posttoken', token);\n\t\t\t\t} else {\n\t\t\t\t\tthis.message = res.data.message\n\t\t\t\t\talert(this.message)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n",{"version":3,"sources":["addStaff.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addStaff.vue","sourceRoot":"src/pages/index/staff","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form ref=\"form\" :model=\"staff\" label-width=\"80px\">\r\n\t\t\t<el-form-item label=\"身份\">\r\n\t\t\t\t<el-radio-group v-model=\"staff.identity\">\r\n\t\t\t\t\t<el-radio label=\"普通员工\" value=\"普通员工\"></el-radio>\r\n\t\t\t\t\t<el-radio label=\"管理者\" value=\"管理员\"></el-radio>\r\n\t\t\t\t</el-radio-group>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"姓名\">\r\n\t\t\t\t<el-input v-model=\"staff.name\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"性别\">\r\n\t\t\t\t<el-radio-group v-model=\"staff.gender\">\r\n\t\t\t\t\t<el-radio label=\"男\" value=\"男\"></el-radio>\r\n\t\t\t\t\t<el-radio label=\"女\" value=\"女\"></el-radio>\r\n\t\t\t\t</el-radio-group>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"出身年月\">\r\n\t\t\t\t<el-col :span=\"11\">\r\n\t\t\t\t\t<el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"staff.birthday\">\r\n\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"手机\">\r\n\t\t\t\t<el-input v-model=\"staff.phone\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"邮箱\">\r\n\t\t\t\t<el-input v-model=\"staff.email\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"账号\">\r\n\t\t\t\t<el-input v-model=\"staff.account\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"初始密码\">\r\n\t\t\t\t<el-input v-model=\"staff.password\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<br>\r\n\t\t\t<el-form-item label=\"部门岗位\">\r\n\t\t\t\t<el-select @change=\"selectChanged\" v-model=\"staff.dept\" placeholder=\"请选择部门\">\r\n\t\t\t\t\t<el-option v-for=\"(item,index) in alldeptlist\" :key=\"item.id\" :label=\"item.deptname\" :value=\"item.id\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-select v-model=\"staff.post\" placeholder=\"请选择岗位\">\r\n\t\t\t\t\t<el-option v-for=\"(item,index) in postlist\" :key=\"item.id\" :label=\"item.postname\" :value=\"item.id\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"汇报对象\">\r\n\t\t\t\t<el-select v-model=\"staff.report\" placeholder=\"请选择汇报对象\">\r\n\t\t\t\t\t<el-option v-for=\"(item,index) in reportlist\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"在职状态\">\r\n\t\t\t\t<el-select v-model=\"staff.state\" placeholder=\"在职\">\r\n\t\t\t\t\t<el-option label=\"在职\" value=\"在职\"></el-option>\r\n\t\t\t\t\t<el-option label=\"离职\" value=\"离职\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"岗位技能\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"staff.skill\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"岗外技能\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"staff.outskill\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addStaff\">立即创建</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\treportlist: [],\r\n\t\t\t\tpostlist: [],\r\n\t\t\t\talldeptlist: [],\r\n\t\t\t\tstaff: {\r\n\t\t\t\t\tidentity: '普通员工',\r\n\t\t\t\t\tname:'',\r\n\t\t\t\t\tgender:'男',\r\n\t\t\t\t\tbirthday:'',\r\n\t\t\t\t\tphone:'',\r\n\t\t\t\t\temail:'',\r\n\t\t\t\t\taccount:'',\r\n\t\t\t\t\tpassword:'',\r\n\t\t\t\t\tdept:'',\r\n\t\t\t\t\tpost:'',\r\n\t\t\t\t\treport:'',\r\n\t\t\t\t\tstate:'',\r\n\t\t\t\t\tskill:'',\r\n\t\t\t\t\toutskill:''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t    let that = this;\r\n\t\t    that.axios.post(\"api/alldeptlist/\")\r\n\t\t      .then(function (resp) {\r\n\t\t        console.log(resp.data);\r\n\t\t        that.alldeptlist = resp.data;\r\n\t\t      })\r\n\t\t      .catch(function (error) {\r\n\t\t        console.log(error);\r\n\t\t      });\r\n\t\t\t  \r\n\t\t\tthat.axios.post(\"api/reportlist/\")\r\n\t\t\t  .then(function (resp) {\r\n\t\t\t    console.log(resp.data);\r\n\t\t\t    that.reportlist = resp.data;\r\n\t\t\t\tconsole.log(\"汇报对象\"+that.reportlist)\r\n\t\t\t  })\r\n\t\t\t  .catch(function (error) {\r\n\t\t\t    console.log(error);\r\n\t\t\t  });\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tselectChanged(e) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet deptid= e\r\n\t\t\t\tconsole.log(deptid);\r\n\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\tparams.append(\"deptid\", deptid);\r\n\t\t\t\tthis.axios.post('api/postlist/', params)\r\n\t\t\t\t.then(function (resp) {\r\n\t\t\t\t  console.log(resp.data);\r\n\t\t\t\t  that.postlist = resp.data;\r\n\t\t\t\t  if(that.postlist.length == 0){\r\n\t\t\t\t\t  alert('该部门无任何岗位，请先去创建！')\r\n\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function (error) {\r\n\t\t\t\t  console.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\taddStaff: function() {\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tidentity:this.staff.identity,\r\n\t\t\t\t\tname:this.staff.name,\r\n\t\t\t\t\tgender:this.staff.gender,\r\n\t\t\t\t\tbirthday:this.staff.birthday,\r\n\t\t\t\t\tphone:this.staff.phone,\r\n\t\t\t\t\temail:this.staff.email,\r\n\t\t\t\t\taccount:this.staff.account,\r\n\t\t\t\t\tpassword:this.staff.password,\r\n\t\t\t\t\tdept:this.staff.dept,\r\n\t\t\t\t\tpost:this.staff.post,\r\n\t\t\t\t\treport:this.staff.report,\r\n\t\t\t\t\tstate:this.staff.state,\r\n\t\t\t\t\tskill:this.staff.skill,\r\n\t\t\t\t\toutskill:this.staff.outskill\r\n\t\t\t\t}\r\n\t\t\t\tlet staff = JSON.stringify(data);\r\n\t\t\t\tconsole.log(staff);\r\n\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\tparams.append(\"staff\", staff);\r\n\t\t\t\tthis.axios.post('api/addStaff/', params)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\talert('恭喜您，新建员工成功！');\r\n\t\t\t\t\t\tlet token = res.data.deptid\r\n\t\t\t\t\t\tlocalStorage.setItem('posttoken', token);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.message = res.data.message\r\n\t\t\t\t\t\talert(this.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"]}]}