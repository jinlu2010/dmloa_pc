{"remainingRequest":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\List.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\List.vue","mtime":1633688147162},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\css-loader\\index.js","mtime":1615258078741},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1615258095783},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\postcss-loader\\src\\index.js","mtime":1615258097227},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1615258095774}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.stafflist{\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: left;\n\talign-items: stretch;\n}\n.staffmenu{\n\tbackground-color: #FCFCFC;\n\twidth: 250px;\n\tfloat: left;\n\tborder-right: 1px solid #E5E5E5;\n\theight: auto;\n}\n.stafftable{\n\tpadding:0;\n\tfloat:left;\n}\n.el-table{\n\tpadding: 10px 20px;\n}\n.el-table::before{\n\theight: 0;\n}\n.stafftable h2{\n\tmargin: 20px 0 0 30px;\n\tfont-size: 18px;\n}\n\n.el-tree{\n\tbackground-color: #FCFCFC;\n}\n.el-tree-node{\n\tmargin-bottom: 10px;\n}\n.el-tree-node__children .el-tree-node{\n\tmargin: 5px 0;\n}\n.el-tree-node__content{\n\tpadding-left: 20px !important;\n}\n\n.staffmenu h2{\n\tmargin: 20px 0 20px 30px;\n\tfont-size: 18px;\n}\n.custom-tree-node {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 14px;\n    padding-right: 20px;\n}\n",{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/pages/index/staff","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"stafflist\">\r\n\t\t\t<div class=\"staffmenu\">\r\n\t\t\t\t<h2>部门岗位</h2>\r\n\t\t\t\t<el-tree :data=\"alldeptlist\" node-key=\"id\" :expand-on-click-node=\"false\">\r\n\t\t\t\t\t<span class=\"custom-tree-node\" slot-scope=\"{ node, data }\" >\r\n\t\t\t\t\t\t<span @click=\"handleNodeClick(node, data)\">{{ node.label }}</span>\r\n\t\t\t\t        <span>\r\n\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click=\"getdeptid(node, data)\">编辑</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click=\"remove(node, data)\">删除</el-button>\r\n\t\t\t\t        </span>\r\n\t\t\t\t    </span>\r\n\t\t\t\t</el-tree>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div class=\"stafftable\" ref=\"stafftable\">\r\n\t\t\t\t<h2>成员列表</h2>\r\n\t\t\t\t<el-table :data=\"stafflist\" style=\"width: 100%\">\r\n\t\t\t\t\t<el-table-column prop=\"name\" label=\"姓名\" width=\"100\"></el-table-column>\r\n\t\t\t\t    <el-table-column prop=\"post\" label=\"岗位\" width=\"120\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"dept\" label=\"部门\" width=\"100\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"phone\" label=\"手机\" width=\"150\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"email\" label=\"邮箱\" width=\"250\"></el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-button @click=\"handleEdit(scope.row)\" type=\"text\" size=\"small\">详细</el-button>\r\n\t\t\t\t\t\t\t<el-button @click=\"handleDelete(scope.$index, scope.row)\" type=\"text\" size=\"small\">删除</el-button>\r\n\t\t\t\t\t\t\t<el-button @click=\"handleKpi(scope.row)\" type=\"text\" size=\"small\">绩效</el-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t</el-table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!--编辑部门，弹窗-->\t\t\r\n\t\t<el-dialog title=\"编辑部门\" :visible.sync=\"deptpopup\">\r\n\t\t  <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t  \t<el-form-item label=\"部门名称\" class=\"deptname\">\r\n\t\t  \t\t<el-input v-model=\"form.deptname\"></el-input><span>部</span>\r\n\t\t  \t</el-form-item>\r\n\t\t  \t<el-form-item label=\"部门意义\">\r\n\t\t  \t\t<el-input type=\"textarea\" v-model=\"form.deptsense\"></el-input>\r\n\t\t  \t</el-form-item>\r\n\t\t  \t<el-form-item label=\"部门目标\">\r\n\t\t  \t\t<el-input type=\"textarea\" v-model=\"form.deptgoal\"></el-input>\r\n\t\t  \t</el-form-item>\r\n\t\t  \t<el-form-item label=\"部门职能\">\r\n\t\t  \t    <el-input type=\"textarea\" v-model=\"form.deptduty\"></el-input>\r\n\t\t  \t  </el-form-item>\r\n\t\t  </el-form>\r\n\t\t  <div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t    <el-button @click=\"deptpopup = false\">取 消</el-button>\r\n\t\t    <el-button type=\"primary\" @click=\"edit()\">确 定</el-button>\r\n\t\t  </div>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t</div>\r\n</template>\r\n\r\n<script>\t\r\n\texport default {\r\n\t\tinject: ['reload'],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstafflist:[],\r\n\t\t\t\talldeptlist:[],\r\n\t\t\t\tmessage:'',\r\n\t\t\t\tform: {\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t\tdeptname: '',\r\n\t\t\t\t\tdeptsense: '',\r\n\t\t\t\t\tdeptgoal: '',\r\n\t\t\t\t\tdeptduty: '',\r\n\t\t\t\t},\r\n\t\t\t\tdeptpopup:false,\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tmounted(){\r\n\t\t\tlet that = this\r\n\t\t\tvar userid = window.localStorage.getItem(\"logintoken\")\r\n\t\t\tconsole.log(userid)\r\n\t\t\t\r\n\t\t\tthat.axios.post(\"api/allstafflist/\")\r\n\t\t\t  .then(function (resp) {\r\n\t\t\t    console.log(resp.data);\r\n\t\t\t\tvar staff = resp.data;\r\n\t\t\t\tthat.stafflist = resp.data;\r\n\t\t\t  })\r\n\t\t\t  .catch(function (error) {\r\n\t\t\t    console.log(error);\r\n\t\t\t  });\r\n\t\t\t\r\n\t\t\tthat.axios.post(\"api/alldeptlist/\")\r\n\t\t\t  .then(function (resp) {\r\n\t\t\t    console.log(resp.data);\r\n\t\t\t\tvar post = JSON.stringify(resp.data)\r\n\t\t\t\tpost = post.replace(/deptname/g, \"label\")\r\n\t\t\t\tpost = post.replace(/post/g, \"children\")\r\n\t\t\t\tpost = post.replace(/childrenname/g, \"label\")\r\n\t\t\t\tpost = JSON.parse(post)\r\n\t\t\t\tthat.alldeptlist = post\r\n\t\t\t\tthat.$forceUpdate()\r\n\t\t\t  })\r\n\t\t\t  .catch(function (error) {\r\n\t\t\t    console.log(error);\r\n\t\t\t  });\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\thandleNodeClick(data) {\r\n\t\t\t\tconsole.log(data.label);\r\n\t\t\t\tconsole.log(data.id);\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (data.label.indexOf(\"部\") != -1) {\r\n\t\t\t\t\tlet deptid = data.id\r\n\t\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"deptid\", deptid);\r\n\t\t\t\t\tthat.axios.post('api/staffdeptlist/', params)\r\n\t\t\t\t\t  .then(function (resp) {\r\n\t\t\t\t\t    console.log(resp.data);\r\n\t\t\t\t\t  \tvar staff = resp.data;\r\n\t\t\t\t\t  \tthat.stafflist = resp.data;\r\n\t\t\t\t\t  })\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet postid = data.id;\r\n\t\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"postid\", postid);\r\n\t\t\t\t\tthat.axios.post('api/staffpostlist/', params)\r\n\t\t\t\t\t  .then(function (resp) {\r\n\t\t\t\t\t    console.log(resp.data);\r\n\t\t\t\t\t  \tvar staff = resp.data;\r\n\t\t\t\t\t  \tthat.stafflist = resp.data;\r\n\t\t\t\t\t  })\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetdeptid(node, data) {\r\n\t\t\t\tconst parent = node.parent;\r\n\t\t\t\tconst children = parent.data.children || parent.data;\r\n\t\t\t\tconst index = children.findIndex(d => d.id === data.id);\r\n\t\t\t\tlet postid = data.id\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (data.label.indexOf(\"部\") != -1) {\r\n\t\t\t\t\tthis.deptpopup = true;\r\n\t\t\t\t\tlet deptid = data.id\r\n\t\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"deptid\", deptid);\r\n\t\t\t\t\tthat.axios.post('api/deptlist/', params)\r\n\t\t\t\t\t  .then(function (resp) {\r\n\t\t\t\t\t    console.log(resp.data);\r\n\t\t\t\t\t\tthat.form.id = resp.data[0].id;\r\n\t\t\t\t\t\tthat.form.deptname = resp.data[0].deptname.replace('部', '');\r\n\t\t\t\t\t\tthat.form.deptsense = resp.data[0].sense;\r\n\t\t\t\t\t\tthat.form.deptgoal = resp.data[0].goal;\r\n\t\t\t\t\t\tthat.form.deptduty = resp.data[0].duty;\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t  .catch(function (error) {\r\n\t\t\t\t\t    console.log(error);\r\n\t\t\t\t\t  });\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tname: 'editpost',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t   \tid: postid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tedit:function(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tid:this.form.id,\r\n\t\t\t\t\tname:this.form.deptname+'部',\r\n\t\t\t\t\tsense:this.form.deptsense,\r\n\t\t\t\t\tgoal:this.form.deptgoal,\r\n\t\t\t\t\tduty:this.form.deptduty\r\n\t\t\t\t}\r\n\t\t\t\tlet dept = JSON.stringify(data);\r\n\t\t\t\tconsole.log(dept);\r\n\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\tparams.append(\"dept\", dept);\r\n\t\t\t\tthis.axios.post('api/editdept/', params)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\talert('恭喜您，修改部门成功！');\r\n\t\t\t\t\t\tthis.reload()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.message = res.data.message\r\n\t\t\t\t\t\talert(this.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tremove(node, data) {\r\n\t\t\t\tconst parent = node.parent;\r\n\t\t\t\tconst children = parent.data.children || parent.data;\r\n\t\t\t\tconst index = children.findIndex(d => d.id === data.id);\r\n\t\t\t\t\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (data.label.indexOf(\"部\") != -1) {\r\n\t\t\t\t\tlet deptid = data.id\r\n\t\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"deptid\", deptid);\r\n\t\t\t\t\tthat.axios.post('api/deldept/', params)\r\n\t\t\t\t\t  .then(function (resp) {\r\n\t\t\t\t\t    if (resp.data.code == 0) {\r\n\t\t\t\t\t\t\talert(\"删除成功\")\r\n\t\t\t\t\t\t\tthat.reload()\r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t\t\tthat.message = resp.data.message\r\n\t\t\t\t\t\t\talert(that.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  })\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet postid = data.id;\r\n\t\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\t\tparams.append(\"postid\", postid);\r\n\t\t\t\t\tthat.axios.post('api/delpost/', params)\r\n\t\t\t\t\t  .then(function (resp) {\r\n\t\t\t\t\t\tif (resp.data.code == 0) {\r\n\t\t\t\t\t\t\talert(\"删除成功\")\r\n\t\t\t\t\t\t\tthat.reload()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.message = resp.data.message\r\n\t\t\t\t\t\t\talert(that.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  })\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleEdit(row) {\r\n\t\t\t\tconsole.log(row.id);\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'editstaff',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t   \tid: row.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleDelete(index, row) {\r\n\t\t\t\tconsole.log(index, row);\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet staffid = row.id;\r\n\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\tparams.append(\"staffid\", staffid);\r\n\t\t\t\tthat.axios.post('api/delstaff/', params)\r\n\t\t\t\t  .then(function (resp) {\r\n\t\t\t\t    if (resp.data.code == 0) {\r\n\t\t\t\t\t\talert(\"删除成功\")\r\n\t\t\t\t\t\tthat.reload()\r\n\t\t\t\t    } else {\r\n\t\t\t\t\t\tthat.message = resp.data.message\r\n\t\t\t\t\t\talert(that.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t  })\r\n\t\t\t},\r\n\t\t\thandleKpi(row) {\r\n\t\t\t\tconsole.log(row.id)\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'staffkpi',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t   \tid: row.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.stafflist{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: left;\r\n\t\talign-items: stretch;\r\n\t}\r\n\t.staffmenu{\r\n\t\tbackground-color: #FCFCFC;\r\n\t\twidth: 250px;\r\n\t\tfloat: left;\r\n\t\tborder-right: 1px solid #E5E5E5;\r\n\t\theight: auto;\r\n\t}\r\n\t.stafftable{\r\n\t\tpadding:0;\r\n\t\tfloat:left;\r\n\t}\r\n\t.el-table{\r\n\t\tpadding: 10px 20px;\r\n\t}\r\n\t.el-table::before{\r\n\t\theight: 0;\r\n\t}\r\n\t.stafftable h2{\r\n\t\tmargin: 20px 0 0 30px;\r\n\t\tfont-size: 18px;\r\n\t}\r\n\r\n\t.el-tree{\r\n\t\tbackground-color: #FCFCFC;\r\n\t}\r\n\t.el-tree-node{\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t.el-tree-node__children .el-tree-node{\r\n\t\tmargin: 5px 0;\r\n\t}\r\n\t.el-tree-node__content{\r\n\t\tpadding-left: 20px !important;\r\n\t}\r\n\t\r\n\t.staffmenu h2{\r\n\t\tmargin: 20px 0 20px 30px;\r\n\t\tfont-size: 18px;\r\n\t}\r\n\t.custom-tree-node {\r\n\t    flex: 1;\r\n\t    display: flex;\r\n\t    align-items: center;\r\n\t    justify-content: space-between;\r\n\t    font-size: 14px;\r\n\t    padding-right: 20px;\r\n\t}\r\n</style>\r\n"]}]}