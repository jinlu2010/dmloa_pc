{"remainingRequest":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\staff\\editPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\staff\\editPost.vue","mtime":1625540006177},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1615258097485},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1615258095774}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet id = 1;\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\talldeptlist: [],\n\t\t\tpost: {\n\t\t\t\tname: '',\n\t\t\t\tdept: '',\n\t\t\t\tsense: '',\n\t\t\t\tresume: '',\n\t\t\t\tpower: '',\n\t\t\t\tskill: '',\n\t\t\t\tconfig: '',\n\t\t\t\trecruit: '',\n\t\t\t\tcondition: '',\n\t\t\t\tgrowth: '',\n\t\t\t\twelfare: '',\n\t\t\t\toust: '',\n\t\t\t\tcontent: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'',\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tscore: '',\n\t\t\t\t\t\tlabel:'',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t}\n\t},\n\tcreated(){\n\t\tlet postid = this.$route.params.id\n\t\tlet params = new URLSearchParams();\n\t\tparams.append(\"postid\", postid);\n\t\tlet that = this;\n\t\tthat.axios.post('api/contentlist/', params)\n\t\t  .then(function (resp) {\n\t\t\t  console.log(\"岗位是\",resp.data);\n\t\t\t  that.post.name = resp.data[0].postname;\n\t\t\t  that.post.dept = resp.data[0].dept['deptname'];\n\t\t\t  that.post.sense = resp.data[0].sense;\n\t\t\t  that.post.resume = resp.data[0].resume;\n\t\t\t  that.post.power = resp.data[0].power;\n\t\t\t  that.post.skill = resp.data[0].skill;\n\t\t\t  that.post.config = resp.data[0].config;\n\t\t\t  that.post.recruit = resp.data[0].recruit;\n\t\t\t  that.post.condition = resp.data[0].condition;\n\t\t\t  that.post.growth = resp.data[0].growth;\n\t\t\t  that.post.welfare = resp.data[0].welfare;\n\t\t\t  that.post.oust = resp.data[0].oust;\n\t\t\t  that.post.content = resp.data[0].content;\n\t\t  })\n\t\t  .catch(function (error) {\n\t\t\t  console.log(error);\n\t\t  });\t\n\t},\n\tmounted() {\n\t    let that = this;\n\t    that.axios.post(\"api/alldeptlist/\")\n\t      .then(function (resp) {\n\t        console.log(resp.data);\n\t        that.alldeptlist = resp.data;\n\t      })\n\t      .catch(function (error) {\n\t        console.log(error);\n\t      });\n\t},\n\tmethods: {\n\t\taddItem: function() {\n\t\t\tthis.post.content.push({\n\t\t\t\ttype: '',\n\t\t\t\tcontent: '',\n\t\t\t\tscore: '',\n\t\t\t\tlabel:'',\n\t\t\t})\n\t\t},\n\t\tdeleteItem: function(item, index) {\n\t\t\tthis.post.content.splice(index, 1)\n\t\t},\n\t\tedit:function(){\n\t\t\tlet data={\n\t\t\t\tid:this.$route.params.id,\n\t\t\t\tname: this.post.name,\n\t\t\t\tdept: this.post.dept,\n\t\t\t\tsense: this.post.sense,\n\t\t\t\tresume: this.post.resume,\n\t\t\t\tpower: this.post.power,\n\t\t\t\tskill: this.post.skill,\n\t\t\t\tconfig: this.post.config,\n\t\t\t\trecruit: this.post.recruit,\n\t\t\t\tcondition: this.post.condition,\n\t\t\t\tgrowth: this.post.growth,\n\t\t\t\twelfare: this.post.welfare,\n\t\t\t\toust: this.post.oust,\n\t\t\t\tcontent:this.post.content,\n\t\t\t}\n\t\t\tlet post = JSON.stringify(data);\n\t\t\tconsole.log(post);\n\t\t\tlet params = new URLSearchParams();\n\t\t\tparams.append(\"post\", post);\n\t\t\tthis.axios.post('api/editpost/', params)\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (res.data.code == 0) {\n\t\t\t\t\talert('恭喜您，修改岗位成功！');\n\t\t\t\t\tthis.$router.push('/staff/list')\n\t\t\t\t} else {\n\t\t\t\t\tthis.message = res.data.message\n\t\t\t\t\talert(this.message)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t}\n}\n",{"version":3,"sources":["editPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"editPost.vue","sourceRoot":"src/pages/index/staff/staff","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form ref=\"form\" :model=\"post\" label-width=\"80px\">\r\n\t\t\t<el-form-item label=\"岗位名称\">\r\n\t\t\t\t<el-input v-model=\"post.name\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"所属部门\">\r\n\t\t\t\t<el-select v-model=\"post.dept\" placeholder=\"请选择部门\" >\r\n\t\t\t\t\t<el-option v-for=\"(item,index) in alldeptlist\" :key=\"item.id\" :label=\"item.deptname\" :value=\"item.deptname\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"岗位意义\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.sense\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"工作概要\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.resume\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"岗位权力\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.power\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"技能要求\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.skill\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"资产配置\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.config\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"招聘要求\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.recruit\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"工作环境\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.condition\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"发展方向\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.growth\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"福利标准\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.welfare\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"淘汰标准\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"post.oust\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t\r\n\t\t\t<el-form-item label=\"工作内容\">\r\n\t\t\t\t<div v-for=\"(item, index) in post.content\" :key=\"index\" class=\"addpost\">\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-select v-model=\"item.type\" placeholder=\"工作类型\" class=\"w90\">\r\n\t\t\t\t\t\t\t<el-option label=\"运营工作\" value=\"运营工作\"></el-option>\r\n\t\t\t\t\t\t    <el-option label=\"管理工作\" value=\"管理工作\"></el-option>\r\n\t\t\t\t\t\t    <el-option label=\"技能工作\" value=\"技能工作\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"岗位工作\" value=\"岗位工作\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-input v-model=\"item.content\" placeholder=\"工作内容\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-select v-model=\"item.kpistandard\" placeholder=\"评分标准\" class=\"w90\">\r\n\t\t\t\t\t\t\t<el-option label=\"0-1分\" value=\"1\"></el-option>\r\n\t\t\t\t\t\t    <el-option label=\"0-2分\" value=\"2\"></el-option>\r\n\t\t\t\t\t\t    <el-option label=\"0-3分\" value=\"3\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"0-4分\" value=\"4\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"0-5分\" value=\"5\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-input v-model=\"item.label\" placeholder=\"搜索标签\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<i class=\"el-icon-delete\" @click=\"deleteItem(item, index)\"></i>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-button @click=\"addItem\" type=\"primary\" plain>新增</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t\t\t\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"edit()\">立即提交</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\tlet id = 1;\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\talldeptlist: [],\r\n\t\t\t\tpost: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tdept: '',\r\n\t\t\t\t\tsense: '',\r\n\t\t\t\t\tresume: '',\r\n\t\t\t\t\tpower: '',\r\n\t\t\t\t\tskill: '',\r\n\t\t\t\t\tconfig: '',\r\n\t\t\t\t\trecruit: '',\r\n\t\t\t\t\tcondition: '',\r\n\t\t\t\t\tgrowth: '',\r\n\t\t\t\t\twelfare: '',\r\n\t\t\t\t\toust: '',\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype:'',\r\n\t\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\t\tscore: '',\r\n\t\t\t\t\t\t\tlabel:'',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tlet postid = this.$route.params.id\r\n\t\t\tlet params = new URLSearchParams();\r\n\t\t\tparams.append(\"postid\", postid);\r\n\t\t\tlet that = this;\r\n\t\t\tthat.axios.post('api/contentlist/', params)\r\n\t\t\t  .then(function (resp) {\r\n\t\t\t\t  console.log(\"岗位是\",resp.data);\r\n\t\t\t\t  that.post.name = resp.data[0].postname;\r\n\t\t\t\t  that.post.dept = resp.data[0].dept['deptname'];\r\n\t\t\t\t  that.post.sense = resp.data[0].sense;\r\n\t\t\t\t  that.post.resume = resp.data[0].resume;\r\n\t\t\t\t  that.post.power = resp.data[0].power;\r\n\t\t\t\t  that.post.skill = resp.data[0].skill;\r\n\t\t\t\t  that.post.config = resp.data[0].config;\r\n\t\t\t\t  that.post.recruit = resp.data[0].recruit;\r\n\t\t\t\t  that.post.condition = resp.data[0].condition;\r\n\t\t\t\t  that.post.growth = resp.data[0].growth;\r\n\t\t\t\t  that.post.welfare = resp.data[0].welfare;\r\n\t\t\t\t  that.post.oust = resp.data[0].oust;\r\n\t\t\t\t  that.post.content = resp.data[0].content;\r\n\t\t\t  })\r\n\t\t\t  .catch(function (error) {\r\n\t\t\t\t  console.log(error);\r\n\t\t\t  });\t\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t    let that = this;\r\n\t\t    that.axios.post(\"api/alldeptlist/\")\r\n\t\t      .then(function (resp) {\r\n\t\t        console.log(resp.data);\r\n\t\t        that.alldeptlist = resp.data;\r\n\t\t      })\r\n\t\t      .catch(function (error) {\r\n\t\t        console.log(error);\r\n\t\t      });\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\taddItem: function() {\r\n\t\t\t\tthis.post.content.push({\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tscore: '',\r\n\t\t\t\t\tlabel:'',\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteItem: function(item, index) {\r\n\t\t\t\tthis.post.content.splice(index, 1)\r\n\t\t\t},\r\n\t\t\tedit:function(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tid:this.$route.params.id,\r\n\t\t\t\t\tname: this.post.name,\r\n\t\t\t\t\tdept: this.post.dept,\r\n\t\t\t\t\tsense: this.post.sense,\r\n\t\t\t\t\tresume: this.post.resume,\r\n\t\t\t\t\tpower: this.post.power,\r\n\t\t\t\t\tskill: this.post.skill,\r\n\t\t\t\t\tconfig: this.post.config,\r\n\t\t\t\t\trecruit: this.post.recruit,\r\n\t\t\t\t\tcondition: this.post.condition,\r\n\t\t\t\t\tgrowth: this.post.growth,\r\n\t\t\t\t\twelfare: this.post.welfare,\r\n\t\t\t\t\toust: this.post.oust,\r\n\t\t\t\t\tcontent:this.post.content,\r\n\t\t\t\t}\r\n\t\t\t\tlet post = JSON.stringify(data);\r\n\t\t\t\tconsole.log(post);\r\n\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\tparams.append(\"post\", post);\r\n\t\t\t\tthis.axios.post('api/editpost/', params)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\talert('恭喜您，修改岗位成功！');\r\n\t\t\t\t\t\tthis.$router.push('/staff/list')\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.message = res.data.message\r\n\t\t\t\t\t\talert(this.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.custom-tree-node {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tfont-size: 14px;\r\n\t\tpadding-right: 8px;\r\n\t}\r\n\t.el-dialog{\r\n\t\twidth:800px\r\n\t}\r\n\t.el-dialog__body .el-table{\r\n\t\tpadding: 0;\r\n\t}\r\n\t.addpost{\r\n\t\twidth:100%;\r\n\t\tdisplay: block;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.addpost .el-form-item{\r\n\t\tfloat: left;\r\n\t}\r\n\t.addpost .el-input{\r\n\t\twidth:250px\r\n\t}\r\n\t.addpost .el-form-item__content{\r\n\t\tmargin-right: 20px;\r\n\t\tmargin-left: 0 !important;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t.el-button{\r\n\t\t\r\n\t}\r\n\t.addpost .el-input--suffix{\r\n\t\twidth:120px !important;\r\n\t\tmargin-right: 0;\n\t}\r\n</style>\n"]}]}