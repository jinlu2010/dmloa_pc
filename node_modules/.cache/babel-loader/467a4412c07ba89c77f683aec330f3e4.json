{"remainingRequest":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\StaffMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\dmloa_pc\\src\\pages\\index\\staff\\StaffMenu.vue","mtime":1624722020049},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1615258097485},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615258085839},{"path":"D:\\HBuilderProjects\\dmloa_pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1615258095774}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bus from \"./Bus.js\";\nexport default {\n  name: 'staffmenu',\n  data: function data() {\n    return {\n      deptlist: []\n    };\n  },\n  mounted: function mounted() {\n    var that = this;\n    that.axios.post(\"api/deptlist/\").then(function (resp) {\n      console.log(resp.data);\n      var post = JSON.stringify(resp.data);\n      post = post.replace(/deptname/g, \"label\");\n      post = post.replace(/post/g, \"children\");\n      post = post.replace(/childrenname/g, \"label\");\n      post = JSON.parse(post); //console.log(\"岗位id\",post[0].children[0].id)\n      //that.$forceUpdate()\n\n      that.deptlist = post;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  },\n  methods: {\n    handleNodeClick: function handleNodeClick(data) {\n      console.log(data.label);\n      console.log(data.id);\n      var postid = data.id;\n      var params = new URLSearchParams();\n      params.append(\"postid\", postid);\n      this.axios.post('api/stafflist/', params).then(function (res) {\n        console.log(res);\n      });\n    },\n    remove: function remove(node, data) {\n      var parent = node.parent;\n      var children = parent.data.children || parent.data;\n      var index = children.findIndex(function (d) {\n        return d.id === data.id;\n      });\n      children.splice(index, 1);\n    }\n  }\n};",{"version":3,"sources":["StaffMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAeA,OAAA,GAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,OAPA,qBAOA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,IAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,eAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,MAAA,IAAA,GAAA,IAAA,CAAA,OAAA,CAAA,WAAA,EAAA,OAAA,CAAA;AACA,MAAA,IAAA,GAAA,IAAA,CAAA,OAAA,CAAA,OAAA,EAAA,UAAA,CAAA;AACA,MAAA,IAAA,GAAA,IAAA,CAAA,OAAA,CAAA,eAAA,EAAA,OAAA,CAAA;AACA,MAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CANA,CAOA;AACA;;AACA,MAAA,IAAA,CAAA,QAAA,GAAA,IAAA;AACA,KAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,KAdA;AAeA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,IADA,EACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,EAAA;AACA,UAAA,MAAA,GAAA,IAAA,eAAA,EAAA;AACA,MAAA,MAAA,CAAA,MAAA,CAAA,QAAA,EAAA,MAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,gBAAA,EAAA,MAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OAHA;AAIA,KAXA;AAYA,IAAA,MAZA,kBAYA,IAZA,EAYA,IAZA,EAYA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,MAAA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,IAAA,CAAA,QAAA,IAAA,MAAA,CAAA,IAAA;AACA,UAAA,KAAA,GAAA,QAAA,CAAA,SAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,IAAA,CAAA,EAAA;AAAA,OAAA,CAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA;AAjBA;AAzBA,CAAA","sourcesContent":["<template>\r\n\t<div id=\"staffmenu\">\r\n\t\t<h2>部门岗位</h2>\r\n\t\t<el-tree :data=\"deptlist\" node-key=\"id\" :expand-on-click-node=\"false\" @node-click=\"handleNodeClick\">\r\n\t\t\t<span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n\t\t\t\t<span>{{ node.label }}</span>\r\n\t\t        <span>\r\n\t\t          <el-button type=\"text\" size=\"mini\" @click=\"() => remove(node, data)\">删除</el-button>\r\n\t\t        </span>\r\n\t\t    </span>\r\n\t\t</el-tree>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Bus from './Bus.js'\r\n\t\r\n\texport default {\r\n\t\tname: 'staffmenu',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdeptlist:[],\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t    let that = this;\r\n\t\t    that.axios.post(\"api/deptlist/\")\r\n\t\t      .then(function (resp) {\r\n\t\t        console.log(resp.data);\r\n\t\t\t\tvar post = JSON.stringify(resp.data)\r\n\t\t\t\tpost = post.replace(/deptname/g, \"label\")\r\n\t\t\t\tpost = post.replace(/post/g, \"children\")\r\n\t\t\t\tpost = post.replace(/childrenname/g, \"label\")\r\n\t\t\t\tpost = JSON.parse(post)\r\n\t\t\t\t//console.log(\"岗位id\",post[0].children[0].id)\r\n\t\t\t\t//that.$forceUpdate()\r\n\t\t\t\tthat.deptlist = post\r\n\t\t      })\r\n\t\t      .catch(function (error) {\r\n\t\t        console.log(error);\r\n\t\t      });\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleNodeClick(data) {\r\n\t\t\t\tconsole.log(data.label);\r\n\t\t\t\tconsole.log(data.id);\r\n\t\t\t\tlet postid = data.id;\r\n\t\t\t\tlet params = new URLSearchParams();\r\n\t\t\t\tparams.append(\"postid\", postid);\r\n\t\t\t\tthis.axios.post('api/stafflist/', params)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tremove(node, data) {\r\n\t\t\t\tconst parent = node.parent;\r\n\t\t\t\tconst children = parent.data.children || parent.data;\r\n\t\t\t\tconst index = children.findIndex(d => d.id === data.id);\r\n\t\t\t\tchildren.splice(index, 1);\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.el-tree{\r\n\t\tbackground-color: #FCFCFC;\r\n\t}\r\n\t.el-tree-node{\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t.el-tree-node__children .el-tree-node{\r\n\t\tmargin: 5px 0;\r\n\t}\r\n\t.el-tree-node__content{\r\n\t\tpadding-left: 20px !important;\r\n\t}\r\n\t\r\n\t#staffmenu h2{\r\n\t\tmargin: 10px 0 20px 30px;\r\n\t\tfont-size: 18px;\r\n\t}\r\n\t.custom-tree-node {\r\n\t    flex: 1;\r\n\t    display: flex;\r\n\t    align-items: center;\r\n\t    justify-content: space-between;\r\n\t    font-size: 14px;\r\n\t    padding-right: 20px;\r\n\t  }\r\n\t\r\n</style>\n"],"sourceRoot":"src/pages/index/staff"}]}